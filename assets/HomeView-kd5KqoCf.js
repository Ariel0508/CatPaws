import{m as L,c as $,g as U,P as tt,M as et,K as st,S as at,a as ot}from"./pagination-rwNRIly-.js";import{_ as nt,k as it,l as rt,g as I,h as lt,r as j,o as C,c as O,a as e,b as S,w as M,F as Z,d as H,t as T,j as R,m as ct,n as dt,q as ut}from"./index-08FGxrZr.js";import{a as F}from"./axios-G2rPRu76.js";import{u as pt}from"./cartStore-1EokPbyD.js";import{u as mt}from"./toastMessage-W4zx11Vp.js";import{_ as ft}from"./ToastMessages-quBXMO8c.js";import{_ as gt}from"./loading-bneA9sLj.js";function vt(h){let{swiper:t,extendParams:k,on:a,emit:p}=h;k({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),t.navigation={nextEl:null,prevEl:null};function _(s){let o;return s&&typeof s=="string"&&t.isElement&&(o=t.el.querySelector(s),o)?o:(s&&(typeof s=="string"&&(o=[...document.querySelectorAll(s)]),t.params.uniqueNavElements&&typeof s=="string"&&o.length>1&&t.el.querySelectorAll(s).length===1&&(o=t.el.querySelector(s))),s&&!o?s:o)}function g(s,o){const r=t.params.navigation;s=L(s),s.forEach(i=>{i&&(i.classList[o?"add":"remove"](...r.disabledClass.split(" ")),i.tagName==="BUTTON"&&(i.disabled=o),t.params.watchOverflow&&t.enabled&&i.classList[t.isLocked?"add":"remove"](r.lockClass))})}function m(){const{nextEl:s,prevEl:o}=t.navigation;if(t.params.loop){g(o,!1),g(s,!1);return}g(o,t.isBeginning&&!t.params.rewind),g(s,t.isEnd&&!t.params.rewind)}function b(s){s.preventDefault(),!(t.isBeginning&&!t.params.loop&&!t.params.rewind)&&(t.slidePrev(),p("navigationPrev"))}function f(s){s.preventDefault(),!(t.isEnd&&!t.params.loop&&!t.params.rewind)&&(t.slideNext(),p("navigationNext"))}function u(){const s=t.params.navigation;if(t.params.navigation=$(t,t.originalParams.navigation,t.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(s.nextEl||s.prevEl))return;let o=_(s.nextEl),r=_(s.prevEl);Object.assign(t.navigation,{nextEl:o,prevEl:r}),o=L(o),r=L(r);const i=(c,x)=>{c&&c.addEventListener("click",x==="next"?f:b),!t.enabled&&c&&c.classList.add(...s.lockClass.split(" "))};o.forEach(c=>i(c,"next")),r.forEach(c=>i(c,"prev"))}function v(){let{nextEl:s,prevEl:o}=t.navigation;s=L(s),o=L(o);const r=(i,c)=>{i.removeEventListener("click",c==="next"?f:b),i.classList.remove(...t.params.navigation.disabledClass.split(" "))};s.forEach(i=>r(i,"next")),o.forEach(i=>r(i,"prev"))}a("init",()=>{t.params.navigation.enabled===!1?n():(u(),m())}),a("toEdge fromEdge lock unlock",()=>{m()}),a("destroy",()=>{v()}),a("enable disable",()=>{let{nextEl:s,prevEl:o}=t.navigation;if(s=L(s),o=L(o),t.enabled){m();return}[...s,...o].filter(r=>!!r).forEach(r=>r.classList.add(t.params.navigation.lockClass))}),a("click",(s,o)=>{let{nextEl:r,prevEl:i}=t.navigation;r=L(r),i=L(i);const c=o.target;if(t.params.navigation.hideOnClick&&!i.includes(c)&&!r.includes(c)){if(t.pagination&&t.params.pagination&&t.params.pagination.clickable&&(t.pagination.el===c||t.pagination.el.contains(c)))return;let x;r.length?x=r[0].classList.contains(t.params.navigation.hiddenClass):i.length&&(x=i[0].classList.contains(t.params.navigation.hiddenClass)),p(x===!0?"navigationShow":"navigationHide"),[...r,...i].filter(E=>!!E).forEach(E=>E.classList.toggle(t.params.navigation.hiddenClass))}});const w=()=>{t.el.classList.remove(...t.params.navigation.navigationDisabledClass.split(" ")),u(),m()},n=()=>{t.el.classList.add(...t.params.navigation.navigationDisabledClass.split(" ")),v()};Object.assign(t.navigation,{enable:w,disable:n,update:m,init:u,destroy:v})}function _t(h){let{swiper:t,extendParams:k,on:a,emit:p,params:_}=h;t.autoplay={running:!1,paused:!1,timeLeft:0},k({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let g,m,b=_&&_.autoplay?_.autoplay.delay:3e3,f=_&&_.autoplay?_.autoplay.delay:3e3,u,v=new Date().getTime(),w,n,s,o,r,i,c;function x(l){!t||t.destroyed||!t.wrapperEl||l.target===t.wrapperEl&&(t.wrapperEl.removeEventListener("transitionend",x),!c&&B())}const E=()=>{if(t.destroyed||!t.autoplay.running)return;t.autoplay.paused?w=!0:w&&(f=u,w=!1);const l=t.autoplay.paused?u:v+f-new Date().getTime();t.autoplay.timeLeft=l,p("autoplayTimeLeft",l,l/b),m=requestAnimationFrame(()=>{E()})},q=()=>{let l;return t.virtual&&t.params.virtual.enabled?l=t.slides.filter(y=>y.classList.contains("swiper-slide-active"))[0]:l=t.slides[t.activeIndex],l?parseInt(l.getAttribute("data-swiper-autoplay"),10):void 0},d=l=>{if(t.destroyed||!t.autoplay.running)return;cancelAnimationFrame(m),E();let P=typeof l>"u"?t.params.autoplay.delay:l;b=t.params.autoplay.delay,f=t.params.autoplay.delay;const y=q();!Number.isNaN(y)&&y>0&&typeof l>"u"&&(P=y,b=y,f=y),u=P;const V=t.params.speed,Q=()=>{!t||t.destroyed||(t.params.autoplay.reverseDirection?!t.isBeginning||t.params.loop||t.params.rewind?(t.slidePrev(V,!0,!0),p("autoplay")):t.params.autoplay.stopOnLastSlide||(t.slideTo(t.slides.length-1,V,!0,!0),p("autoplay")):!t.isEnd||t.params.loop||t.params.rewind?(t.slideNext(V,!0,!0),p("autoplay")):t.params.autoplay.stopOnLastSlide||(t.slideTo(0,V,!0,!0),p("autoplay")),t.params.cssMode&&(v=new Date().getTime(),requestAnimationFrame(()=>{d()})))};return P>0?(clearTimeout(g),g=setTimeout(()=>{Q()},P)):requestAnimationFrame(()=>{Q()}),P},D=()=>{v=new Date().getTime(),t.autoplay.running=!0,d(),p("autoplayStart")},A=()=>{t.autoplay.running=!1,clearTimeout(g),cancelAnimationFrame(m),p("autoplayStop")},N=(l,P)=>{if(t.destroyed||!t.autoplay.running)return;clearTimeout(g),l||(i=!0);const y=()=>{p("autoplayPause"),t.params.autoplay.waitForTransition?t.wrapperEl.addEventListener("transitionend",x):B()};if(t.autoplay.paused=!0,P){r&&(u=t.params.autoplay.delay),r=!1,y();return}u=(u||t.params.autoplay.delay)-(new Date().getTime()-v),!(t.isEnd&&u<0&&!t.params.loop)&&(u<0&&(u=0),y())},B=()=>{t.isEnd&&u<0&&!t.params.loop||t.destroyed||!t.autoplay.running||(v=new Date().getTime(),i?(i=!1,d(u)):d(),t.autoplay.paused=!1,p("autoplayResume"))},z=()=>{if(t.destroyed||!t.autoplay.running)return;const l=U();l.visibilityState==="hidden"&&(i=!0,N(!0)),l.visibilityState==="visible"&&B()},K=l=>{l.pointerType==="mouse"&&(i=!0,c=!0,!(t.animating||t.autoplay.paused)&&N(!0))},X=l=>{l.pointerType==="mouse"&&(c=!1,t.autoplay.paused&&B())},G=()=>{t.params.autoplay.pauseOnMouseEnter&&(t.el.addEventListener("pointerenter",K),t.el.addEventListener("pointerleave",X))},J=()=>{t.el.removeEventListener("pointerenter",K),t.el.removeEventListener("pointerleave",X)},W=()=>{U().addEventListener("visibilitychange",z)},Y=()=>{U().removeEventListener("visibilitychange",z)};a("init",()=>{t.params.autoplay.enabled&&(G(),W(),D())}),a("destroy",()=>{J(),Y(),t.autoplay.running&&A()}),a("_freeModeStaticRelease",()=>{(s||i)&&B()}),a("_freeModeNoMomentumRelease",()=>{t.params.autoplay.disableOnInteraction?A():N(!0,!0)}),a("beforeTransitionStart",(l,P,y)=>{t.destroyed||!t.autoplay.running||(y||!t.params.autoplay.disableOnInteraction?N(!0,!0):A())}),a("sliderFirstMove",()=>{if(!(t.destroyed||!t.autoplay.running)){if(t.params.autoplay.disableOnInteraction){A();return}n=!0,s=!1,i=!1,o=setTimeout(()=>{i=!0,s=!0,N(!0)},200)}}),a("touchEnd",()=>{if(!(t.destroyed||!t.autoplay.running||!n)){if(clearTimeout(o),clearTimeout(g),t.params.autoplay.disableOnInteraction){s=!1,n=!1;return}s&&t.params.cssMode&&B(),s=!1,n=!1}}),a("slideChange",()=>{t.destroyed||!t.autoplay.running||(r=!0)}),Object.assign(t.autoplay,{start:D,stop:A,pause:N,resume:B})}const yt="/week8/assets/1-UpvAcVqM.png",ht="/week8/assets/6-RSZT1s_d.png",bt="/week8/assets/2-6XQBVvbT.png",wt="/week8/assets/3-Vlw8e5Xk.png";var xt={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"rubby-api",BASE_URL:"/week8/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Et={setup(){const h=()=>{a.push("/products"),window.scrollTo(0,0)},{VITE_APP_URL:t,VITE_APP_PATH:k}=xt,a=it(),p=rt(),_=pt(),{getCart:g}=_,m=I([]),b=I(p.params.productId),f=I({loadingItem:""}),u=I(!1),v=mt(),{pushMessage:w}=v,n=d=>{f.value.loadingItem=d;const D={product_id:d,qty:1},A=`${t}/api/${k}/cart`;F.post(A,{data:D}).then(N=>{f.value.loadingItem="",w({style:"success",title:"加入購物車",content:N.data.message}),g()})},s=(d=2)=>{u.value=!0,F.get(`${t}/api/${k}/products?page=${d}`).then(D=>{m.value=D.data.products,u.value=!1}).catch(D=>{alert(D.response.data.message)})},o=d=>{a.push(`/product/${d.id}`).then(()=>{window.scrollTo(0,0)})},r=I(!0),i=d=>{d===""?r.value=!0:r.value=!1},c=I(null),x=()=>{F.get(`${t}/api/${k}/products/all`).then(d=>{d.data.success&&d.data.products.length>0&&(c.value=d.data.products[d.data.products.length-1])}).catch(()=>{c.value=null})},E=I(null),q=()=>{F.get(`${t}/api/${k}/products/all`).then(d=>{d.data.success&&d.data.products.length>0&&(E.value=d.data.products[d.data.products.length-2])}).catch(()=>{E.value=null})};return lt(()=>{s(),x(),q()}),{modules:[vt,tt,_t,et,st],goToShop:h,products:m,openModal:o,addToCart:n,handleCategoryClick:i,id:b,status:f,isLoading:u,lastProduct:c,secondLastProduct:E}},components:{Swiper:at,SwiperSlide:ot,ToastMessages:ft}},Tt={id:"app"},kt=e("img",{src:gt,width:"500",alt:"loading",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}},null,-1),Pt={class:"row p-0 bg-black mt-6"},Lt=e("div",{class:"col-md-5 col-12 p-0"},[e("img",{src:yt,class:"img-fluid w-100 object-fit-cover",style:{height:"550px"},alt:"banner"})],-1),Ct={class:"col-md-7 col-12 text-center p-0 d-flex flex-column align-items-center justify-content-center"},St={class:"m-4"},Mt=e("p",{class:"text-light mt-3",style:{"font-size":"1.5em"}}," 讓您的貓咪成為時尚界的新寵兒! ",-1),Dt={class:"container mt-8"},Nt={class:"row pc mb-5"},Ot={key:0,class:"col-md-6 p-0 bg-white d-flex justify-content-start text-start",style:{width:"550px"}},At={class:"ms-5"},Bt=e("p",{class:"fs-1 mt-8"},"新品上市",-1),It={class:"card-title fs-5 mt-6 mb-3"},Vt={class:"card-title text-brown fs-5"},jt={class:"fs-6 my-5",style:{width:"300px"}},Rt={class:"col-md-6 p-0 position-relative cursor-pointer"},Ft=["src"],qt={class:"row pc"},Ut={key:0,class:"col-md-6 p-0 bg-white d-flex justify-content-start text-start",style:{width:"550px"}},Ht={class:"ms-5"},zt=e("p",{class:"fs-1 mt-8"},"新品上市",-1),Kt={class:"card-title fs-5 mt-6 mb-3"},Xt={class:"card-title text-brown fs-5"},Qt={class:"fs-6 my-5",style:{width:"300px"}},Zt={class:"col-md-6 p-0 position-relative cursor-pointer"},Gt=["src"],Jt={class:"row newProduct mobile"},Wt={class:"col-12 position-relative cursor-pointer"},Yt=["src"],$t=e("a",{class:"position-absolute top-50 start-50 translate-middle text-decoration-underline text-white fs-4"}," 新品上市 ",-1),te={class:"row newProduct mobile"},ee={class:"col-12 position-relative cursor-pointer"},se=["src"],ae=e("a",{class:"position-absolute top-50 start-50 translate-middle text-decoration-underline text-white fs-4"}," 新品上市 ",-1),oe={class:"container mt-8"},ne=e("h3",{class:"text-center text-brown"},[H(" 產品分類 "),e("div",{class:"text-center text-brown m-0 p-0 fs-1"},"-")],-1),ie={class:"row"},re={class:"col-md-4 col-12 mb-3 position-relative category"},le=e("img",{src:ht,class:"img-fluid w-100 object-fit-cover rounded-3",style:{height:"400px"},alt:"productPicture"},null,-1),ce=e("p",{class:"fs-5 position-absolute top-50 start-50 translate-middle text-decoration-underline text-white"}," 生活用品 ",-1),de={class:"col-md-4 col-12 mb-3 position-relative category"},ue=e("img",{src:bt,class:"img-fluid w-100 object-fit-cover rounded-3",style:{height:"400px"},alt:"productPicture"},null,-1),pe=e("p",{class:"fs-5 position-absolute top-50 start-50 translate-middle text-decoration-underline text-white"}," 時尚配件 ",-1),me={class:"col-md-4 col-12 mb-3 position-relative category"},fe=e("img",{src:wt,class:"img-fluid w-100 object-fit-cover rounded-3",style:{height:"400px"},alt:"productPicture"},null,-1),ge=e("p",{class:"fs-5 position-absolute top-50 start-50 translate-middle text-decoration-underline text-white"}," 休閒娛樂 ",-1),ve={class:"container mt-8"},_e=e("h3",{class:"text-center text-brown"},[H(" 精選商品 "),e("div",{class:"text-center text-brown m-0 p-0 fs-1"},"-")],-1),ye={id:"swiper"},he=["onClick"],be={key:0,class:"position-absolute top-0 start-0 fw-bold text-white p-2 bg-brown fs-6 fw-bold"},we=["src"],xe={class:"card-body d-flex flex-column justify-content-between p-3"},Ee={class:"card-title"},Te={key:0,class:"text-gray2 fs-5 mt-2"},ke={key:1,class:"d-flex align-items-center justify-content-center ms-2 mt-2"},Pe={class:"text-gray2 fs-5"},Le={class:"text-brown fs-5 ms-3"},Ce={class:"mt-2"},Se=["onClick"],Me={key:0,class:"spinner-border spinner-border-sm","aria-hidden":"true"},De=e("i",{class:"bi bi-cart-plus fs-5"},null,-1);function Ne(h,t,k,a,p,_){var v,w;const g=j("VueLoading"),m=j("swiper-slide"),b=j("swiper"),f=j("RouterLink"),u=j("ToastMessages");return C(),O(Z,null,[e("div",Tt,[S(g,{active:a.isLoading,"is-full-page":!0,"background-color":"#FFF8F1",opacity:1,"z-index":1060},{default:M(()=>[kt]),_:1},8,["active"]),e("div",Pt,[Lt,e("div",Ct,[e("div",St,[Mt,e("button",{type:"button",class:"btn btn-outline-light m-3 px-5 btn-lg rounded-0",onClick:t[0]||(t[0]=(...n)=>a.goToShop&&a.goToShop(...n))}," 立即選購 ")])])])]),e("div",Dt,[S(b,{spaceBetween:30,centeredSlides:!0,autoplay:{delay:2500,disableOnInteraction:!1},pagination:{clickable:!0},navigation:!0,modules:a.modules,class:"mySwiper"},{default:M(()=>[S(m,null,{default:M(()=>{var n;return[e("div",Nt,[a.lastProduct?(C(),O("div",Ot,[e("div",At,[Bt,e("p",It,T(a.lastProduct.title),1),e("span",Vt,"$"+T(h.$filters.numberToCurrencyNo(a.lastProduct.price)),1),e("p",jt,T(a.lastProduct.content),1),e("p",{class:"mb-3 fs-6 cursor-pointer text-decoration-underline",onClick:t[1]||(t[1]=s=>a.openModal(a.lastProduct))}," 立即選購 >> ")])])):R("",!0),e("div",Rt,[e("img",{src:(n=a.lastProduct)==null?void 0:n.imagesUrl[0],class:"img-fluid object-fit-cover w-100",style:{height:"550px"},alt:"picture",onClick:t[2]||(t[2]=s=>a.openModal(a.lastProduct))},null,8,Ft)])])]}),_:1}),S(m,null,{default:M(()=>{var n;return[e("div",qt,[a.secondLastProduct?(C(),O("div",Ut,[e("div",Ht,[zt,e("p",Kt,T(a.secondLastProduct.title),1),e("span",Xt,"$"+T(h.$filters.numberToCurrencyNo(a.secondLastProduct.price)),1),e("p",Qt,T(a.secondLastProduct.content),1),e("p",{class:"mb-3 fs-6 cursor-pointer text-decoration-underline",onClick:t[3]||(t[3]=s=>a.openModal(a.secondLastProduct))}," 立即選購 >> ")])])):R("",!0),e("div",Zt,[e("img",{src:(n=a.secondLastProduct)==null?void 0:n.imagesUrl[0],class:"img-fluid object-fit-cover w-100",style:{height:"550px"},alt:"picture",onClick:t[4]||(t[4]=s=>a.openModal(a.secondLastProduct))},null,8,Gt)])])]}),_:1})]),_:1},8,["modules"]),e("div",Jt,[e("div",Wt,[e("img",{src:(v=a.lastProduct)==null?void 0:v.imagesUrl[0],class:"img-fluid object-fit-cover w-100",style:{height:"500px"},alt:"picture",onClick:t[5]||(t[5]=n=>a.openModal(a.lastProduct))},null,8,Yt),$t])]),e("div",te,[e("div",ee,[e("img",{src:(w=a.secondLastProduct)==null?void 0:w.imagesUrl[0],class:"img-fluid object-fit-cover w-100",style:{height:"500px"},alt:"picture",onClick:t[6]||(t[6]=n=>a.openModal(a.secondLastProduct))},null,8,se),ae])])]),e("div",oe,[ne,e("div",ie,[e("div",re,[S(f,{class:"text-decoration-none",to:"/products?category=生活用品",onclick:"window.scrollTo(0, 0);"},{default:M(()=>[le,ce]),_:1})]),e("div",de,[S(f,{class:"text-decoration-none",to:"/products?category=時尚配件",onclick:"window.scrollTo(0, 0);"},{default:M(()=>[ue,pe]),_:1})]),e("div",me,[S(f,{class:"text-decoration-none",to:"/products?category=休閒娛樂",onclick:"window.scrollTo(0, 0);"},{default:M(()=>[fe,ge]),_:1})])])]),e("div",ve,[_e,e("div",ye,[S(b,{slidesPerView:1,spaceBetween:10,pagination:{clickable:!0},breakpoints:{640:{slidesPerView:2,spaceBetween:20},1024:{slidesPerView:4,spaceBetween:30}},grabCursor:!0,freeMode:!0,modules:a.modules,class:"mySwiper",mousewheel:!0,keyboard:!0},{default:M(()=>[(C(!0),O(Z,null,ct(a.products,n=>(C(),dt(m,{key:n.id},{default:M(()=>[e("div",null,[e("div",{class:"card shadow-sm rounded-lg border-0 position-relative mb-5",onClick:s=>a.openModal(n)},[n.price!==n.origin_price?(C(),O("span",be,"SALE")):R("",!0),e("img",{src:n.imageUrl,class:"card-img-top object-fit-cover w-100",style:{height:"300px"},alt:"productPicture"},null,8,we),e("div",xe,[e("div",Ee,T(n.title),1),n.price===n.origin_price?(C(),O("div",Te," $"+T(h.$filters.numberToCurrencyNo(n.origin_price)),1)):(C(),O("div",ke,[e("del",Pe,"$"+T(h.$filters.numberToCurrencyNo(n.origin_price)),1),e("div",Le," $"+T(h.$filters.numberToCurrencyNo(n.price)),1)])),e("div",Ce,[e("button",{type:"button",class:"btn btn-outline-brown m-2 px-5 rounded-pill",onClick:ut(s=>a.addToCart(n.id,1),["stop"])},[n.id===a.status.loadingItem?(C(),O("span",Me)):R("",!0),H(" 加入購物車 "),De],8,Se)])])],8,he)])]),_:2},1024))),128))]),_:1},8,["modules"])])]),S(u)],64)}const Fe=nt(Et,[["render",Ne]]);export{Fe as default};
