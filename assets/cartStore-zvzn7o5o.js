import{M as T,g as e,l as $,h as A}from"./index-lOYKTrqc.js";import{a as n}from"./axios-G2rPRu76.js";import{u as E}from"./toastMessage-Ejf1zxCP.js";var S={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"rubby-api",BASE_URL:"/week8/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_URL:r,VITE_APP_PATH:c}=S,V=T("cart",()=>{const u=e([]),i=e(0),p=e(0),g=$(),o=e({loadingItem:""}),_=e(g.params.productId),v=e([]),f=E(),{pushMessage:m}=f,s=()=>{const t=`${r}/api/${c}/cart`;n.get(t).then(a=>{u.value=a.data.data.carts,i.value=a.data.data.final_total,p.value=a.data.data.total})},l=()=>{const t=`${r}/api/${c}/cart`;n.get(t).then(a=>{u.value=a.data.data})},I=t=>{o.value.loadingItem=t;const a={product_id:t,qty:1},d=`${r}/api/${c}/cart`;n.post(d,{data:a}).then(h=>{o.value.loadingItem="",m({style:"success",title:"成功加入購物車",content:h.data.message}),s()})},P=t=>{o.value.loadingItem=t;const a=`${r}/api/${c}/cart/${t}`;n.delete(a).then(d=>{o.value.loadingItem="",m({style:"success",title:"刪除成功",content:d.data.message}),s(),l()})};return A(()=>{s(),l()}),{carts:u,finalTotal:i,total:p,getCart:s,getCartList:l,addToCart:I,removeCartItem:P,status:o,id:_,products:v}});export{V as u};
