import{m as g,c as q,P as R,M as O,K as F,S as H,a as z}from"./pagination-LHt2JKKa.js";import{_ as K,k as X,l as Q,g as L,h as G,r as V,o as f,c as x,a as s,b as v,w as h,F as B,d as A,m as J,n as W,j as N,t as u,q as Y}from"./index-lOYKTrqc.js";import{a as j}from"./axios-G2rPRu76.js";import{u as Z}from"./cartStore-zvzn7o5o.js";import{u as $}from"./toastMessage-Ejf1zxCP.js";import{_ as tt}from"./ToastMessages-z9_qVJA-.js";import{_ as st}from"./loading-bneA9sLj.js";function et(m){let{swiper:t,extendParams:y,on:o,emit:k}=m;y({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),t.navigation={nextEl:null,prevEl:null};function S(e){let i;return e&&typeof e=="string"&&t.isElement&&(i=t.el.querySelector(e),i)?i:(e&&(typeof e=="string"&&(i=[...document.querySelectorAll(e)]),t.params.uniqueNavElements&&typeof e=="string"&&i.length>1&&t.el.querySelectorAll(e).length===1&&(i=t.el.querySelector(e))),e&&!i?e:i)}function w(e,i){const a=t.params.navigation;e=g(e),e.forEach(l=>{l&&(l.classList[i?"add":"remove"](...a.disabledClass.split(" ")),l.tagName==="BUTTON"&&(l.disabled=i),t.params.watchOverflow&&t.enabled&&l.classList[t.isLocked?"add":"remove"](a.lockClass))})}function d(){const{nextEl:e,prevEl:i}=t.navigation;if(t.params.loop){w(i,!1),w(e,!1);return}w(i,t.isBeginning&&!t.params.rewind),w(e,t.isEnd&&!t.params.rewind)}function P(e){e.preventDefault(),!(t.isBeginning&&!t.params.loop&&!t.params.rewind)&&(t.slidePrev(),k("navigationPrev"))}function p(e){e.preventDefault(),!(t.isEnd&&!t.params.loop&&!t.params.rewind)&&(t.slideNext(),k("navigationNext"))}function _(){const e=t.params.navigation;if(t.params.navigation=q(t,t.originalParams.navigation,t.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(e.nextEl||e.prevEl))return;let i=S(e.nextEl),a=S(e.prevEl);Object.assign(t.navigation,{nextEl:i,prevEl:a}),i=g(i),a=g(a);const l=(c,E)=>{c&&c.addEventListener("click",E==="next"?p:P),!t.enabled&&c&&c.classList.add(...e.lockClass.split(" "))};i.forEach(c=>l(c,"next")),a.forEach(c=>l(c,"prev"))}function b(){let{nextEl:e,prevEl:i}=t.navigation;e=g(e),i=g(i);const a=(l,c)=>{l.removeEventListener("click",c==="next"?p:P),l.classList.remove(...t.params.navigation.disabledClass.split(" "))};e.forEach(l=>a(l,"next")),i.forEach(l=>a(l,"prev"))}o("init",()=>{t.params.navigation.enabled===!1?n():(_(),d())}),o("toEdge fromEdge lock unlock",()=>{d()}),o("destroy",()=>{b()}),o("enable disable",()=>{let{nextEl:e,prevEl:i}=t.navigation;if(e=g(e),i=g(i),t.enabled){d();return}[...e,...i].filter(a=>!!a).forEach(a=>a.classList.add(t.params.navigation.lockClass))}),o("click",(e,i)=>{let{nextEl:a,prevEl:l}=t.navigation;a=g(a),l=g(l);const c=i.target;if(t.params.navigation.hideOnClick&&!l.includes(c)&&!a.includes(c)){if(t.pagination&&t.params.pagination&&t.params.pagination.clickable&&(t.pagination.el===c||t.pagination.el.contains(c)))return;let E;a.length?E=a[0].classList.contains(t.params.navigation.hiddenClass):l.length&&(E=l[0].classList.contains(t.params.navigation.hiddenClass)),k(E===!0?"navigationShow":"navigationHide"),[...a,...l].filter(C=>!!C).forEach(C=>C.classList.toggle(t.params.navigation.hiddenClass))}});const T=()=>{t.el.classList.remove(...t.params.navigation.navigationDisabledClass.split(" ")),_(),d()},n=()=>{t.el.classList.add(...t.params.navigation.navigationDisabledClass.split(" ")),b()};Object.assign(t.navigation,{enable:T,disable:n,update:d,init:_,destroy:b})}const ot="/week8/assets/1-UpvAcVqM.png",it="/week8/assets/6-iqdAB-xn.png",nt="/week8/assets/2-6XQBVvbT.png",at="/week8/assets/3-Vlw8e5Xk.png";var lt={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"rubby-api",BASE_URL:"/week8/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const rt={setup(){const m=()=>{o.push("/products"),window.scrollTo(0,0)},{VITE_APP_URL:t,VITE_APP_PATH:y}=lt,o=X(),k=Q(),S=Z(),{getCart:w}=S,d=L([]),P=L(k.params.productId),p=L({loadingItem:""}),_=L(!1),b=$(),{pushMessage:T}=b,n=r=>{p.value.loadingItem=r;const M={product_id:r,qty:1},I=`${t}/api/${y}/cart`;j.post(I,{data:M}).then(U=>{p.value.loadingItem="",T({style:"success",title:"加入購物車",content:U.data.message}),w()})},e=(r=2)=>{_.value=!0,j.get(`${t}/api/${y}/products?page=${r}`).then(M=>{d.value=M.data.products,_.value=!1}).catch(M=>{alert(M.response.data.message)})},i=r=>{o.push(`/product/${r.id}`).then(()=>{window.scrollTo(0,0)})},a=L(!0),l=r=>{r===""?a.value=!0:a.value=!1,console.log(r)},c=L(null),E=()=>{j.get(`${t}/api/${y}/products/all`).then(r=>{r.data.success&&r.data.products.length>0&&(c.value=r.data.products[r.data.products.length-1])}).catch(r=>{console.error(r.response.data.message),c.value=null})},C=L(null),D=()=>{j.get(`${t}/api/${y}/products/all`).then(r=>{r.data.success&&r.data.products.length>0&&(C.value=r.data.products[r.data.products.length-2])}).catch(r=>{console.error(r.response.data.message),C.value=null})};return G(()=>{e(),E(),D()}),{modules:[et,R,O,F],goToShop:m,products:d,openModal:i,addToCart:n,handleCategoryClick:l,id:P,status:p,isLoading:_,lastProduct:c,secondLastProduct:C}},components:{Swiper:H,SwiperSlide:z,ToastMessages:tt}},ct={id:"app"},dt=s("img",{src:st,width:"500",alt:"loading",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}},null,-1),pt={class:"row p-0 bg-black"},ut=s("div",{class:"col-md-5 col-12 p-0"},[s("img",{src:ot,class:"img-fluid w-100 object-fit-cover",style:{height:"500px"},alt:"banner"})],-1),mt={class:"col-md-7 col-12 text-center align-self-center mt-5 p-0"},_t=s("p",{class:"text-light",style:{"font-size":"1.5em"}}," 讓您的貓咪成為時尚界的新寵兒! ",-1),gt={class:"container mt-8"},ft=s("h3",{class:"text-center text-brown"},[A(" 精選商品 "),s("div",{class:"text-center text-brown m-0 p-0 fs-1"},"-")],-1),vt={id:"swiper"},ht={class:"row"},wt=["onClick"],bt={key:0,class:"position-absolute top-0 start-0 fw-bold text-white p-2 bg-brown rounded-top"},xt=["src"],yt={class:"card-body d-flex flex-column justify-content-between p-3"},kt={class:"card-title"},Pt={key:0,class:"text-gray2 fs-5 mt-2"},Et={key:1,class:"d-flex align-items-center justify-content-center ms-2 mt-2"},Ct={class:"text-gray2 fs-5"},Lt={class:"text-brown fs-5 ms-3"},Tt={class:"mt-2"},St=["onClick"],Mt={key:0,class:"spinner-border spinner-border-sm","aria-hidden":"true"},Vt=s("i",{class:"bi bi-cart-plus fs-5"},null,-1),Nt={class:"container-fluid mt-8"},jt={class:"row pc"},Bt={key:0,class:"col-md-6 p-0 bg-white d-flex justify-content-start text-start",style:{width:"600px"}},At={class:"ms-5"},Dt=s("p",{class:"fs-1 mt-8"},"新品上市",-1),It={class:"card-title fs-5 mt-6 mb-3"},Ut={class:"card-title text-brown fs-5"},qt={class:"fs-6 my-5",style:{width:"300px"}},Rt={class:"col-md-6 p-0 position-relative cursor-pointer"},Ot=["src"],Ft={class:"row pc"},Ht={key:0,class:"col-md-6 p-0 bg-white d-flex justify-content-start text-start",style:{width:"600px"}},zt={class:"ms-5"},Kt=s("p",{class:"fs-1 mt-8"},"新品上市",-1),Xt={class:"card-title fs-5 mt-6 mb-3"},Qt={class:"card-title text-brown fs-5"},Gt={class:"fs-6 my-5",style:{width:"300px"}},Jt={class:"col-md-6 p-0 position-relative cursor-pointer"},Wt=["src"],Yt={class:"row newProduct mobile"},Zt={class:"col-12 position-relative cursor-pointer"},$t=["src"],ts=s("a",{class:"position-absolute top-50 start-50 translate-middle text-decoration-underline text-white fs-4"}," 新品上市 ",-1),ss={class:"row newProduct mobile"},es={class:"col-12 position-relative cursor-pointer"},os=["src"],is=s("a",{class:"position-absolute top-50 start-50 translate-middle text-decoration-underline text-white fs-4"}," 新品上市 ",-1),ns={class:"container mt-8"},as={class:"row"},ls={class:"col-md-4 col-12 mb-3 position-relative category"},rs=s("img",{src:it,class:"img-fluid w-100 object-fit-cover rounded-3",style:{height:"400px"},alt:"productPicture"},null,-1),cs=s("p",{class:"fs-5 position-absolute top-50 start-50 translate-middle text-decoration-underline text-white"}," 生活用品 ",-1),ds={class:"col-md-4 col-12 mb-3 position-relative category"},ps=s("img",{src:nt,class:"img-fluid w-100 object-fit-cover rounded-3",style:{height:"400px"},alt:"productPicture"},null,-1),us=s("p",{class:"fs-5 position-absolute top-50 start-50 translate-middle text-decoration-underline text-white"}," 時尚配件 ",-1),ms={class:"col-md-4 col-12 mb-3 position-relative category"},_s=s("img",{src:at,class:"img-fluid w-100 object-fit-cover rounded-3",style:{height:"400px"},alt:"productPicture"},null,-1),gs=s("p",{class:"fs-5 position-absolute top-50 start-50 translate-middle text-decoration-underline text-white"}," 休閒娛樂 ",-1);function fs(m,t,y,o,k,S){var b,T;const w=V("VueLoading"),d=V("swiper-slide"),P=V("swiper"),p=V("RouterLink"),_=V("ToastMessages");return f(),x(B,null,[s("div",ct,[v(w,{active:o.isLoading,"is-full-page":!0,"background-color":"#FFF8F1",opacity:1,"z-index":1060},{default:h(()=>[dt]),_:1},8,["active"]),s("div",pt,[ut,s("div",mt,[_t,s("button",{type:"button",class:"btn btn-outline-light m-3 px-5 btn-lg rounded-0",onClick:t[0]||(t[0]=(...n)=>o.goToShop&&o.goToShop(...n))}," 立即選購 ")])])]),s("div",gt,[ft,s("div",vt,[v(P,{slidesPerView:1,spaceBetween:10,pagination:{clickable:!0},breakpoints:{640:{slidesPerView:2,spaceBetween:20},1024:{slidesPerView:4,spaceBetween:30}},grabCursor:!0,freeMode:!0,modules:o.modules,class:"mySwiper",mousewheel:!0,keyboard:!0},{default:h(()=>[(f(!0),x(B,null,J(o.products,n=>(f(),W(d,{key:n.id},{default:h(()=>[s("div",ht,[s("div",{class:"card shadow-sm rounded-lg border-0 position-relative p-0 mb-5",onClick:e=>o.openModal(n)},[n.price!==n.origin_price?(f(),x("span",bt,"SALE")):N("",!0),s("img",{src:n.imageUrl,class:"card-img-top object-fit-cover w-100",style:{height:"300px"},alt:"productPicture"},null,8,xt),s("div",yt,[s("div",kt,u(n.title),1),n.price===n.origin_price?(f(),x("div",Pt," $"+u(m.$filters.numberToCurrencyNo(n.origin_price)),1)):(f(),x("div",Et,[s("del",Ct,"$"+u(m.$filters.numberToCurrencyNo(n.origin_price)),1),s("div",Lt," $"+u(m.$filters.numberToCurrencyNo(n.price)),1)])),s("div",Tt,[s("button",{type:"button",class:"btn btn-outline-brown m-2 px-5 rounded-pill",onClick:Y(e=>o.addToCart(n.id,1),["stop"])},[n.id===o.status.loadingItem?(f(),x("span",Mt)):N("",!0),A(" 加入購物車 "),Vt],8,St)])])],8,wt)])]),_:2},1024))),128))]),_:1},8,["modules"])])]),s("div",Nt,[v(P,{navigation:!0,modules:o.modules,class:"mySwiper"},{default:h(()=>[v(d,null,{default:h(()=>{var n;return[s("div",jt,[o.lastProduct?(f(),x("div",Bt,[s("div",At,[Dt,s("p",It,u(o.lastProduct.title),1),s("span",Ut,"$"+u(m.$filters.numberToCurrencyNo(o.lastProduct.price)),1),s("p",qt,u(o.lastProduct.content),1),s("p",{class:"mb-3 fs-6 cursor-pointer text-decoration-underline",onClick:t[1]||(t[1]=e=>o.openModal(o.lastProduct))}," 立即選購 >> ")])])):N("",!0),s("div",Rt,[s("img",{src:(n=o.lastProduct)==null?void 0:n.imagesUrl[0],class:"img-fluid object-fit-cover w-100",style:{height:"600px"},alt:"picture",onClick:t[2]||(t[2]=e=>o.openModal(o.lastProduct))},null,8,Ot)])])]}),_:1}),v(d,null,{default:h(()=>{var n;return[s("div",Ft,[o.secondLastProduct?(f(),x("div",Ht,[s("div",zt,[Kt,s("p",Xt,u(o.secondLastProduct.title),1),s("span",Qt,"$"+u(m.$filters.numberToCurrencyNo(o.secondLastProduct.price)),1),s("p",Gt,u(o.secondLastProduct.content),1),s("p",{class:"mb-3 fs-6 cursor-pointer text-decoration-underline",onClick:t[3]||(t[3]=e=>o.openModal(o.secondLastProduct))}," 立即選購 >> ")])])):N("",!0),s("div",Jt,[s("img",{src:(n=o.secondLastProduct)==null?void 0:n.imagesUrl[0],class:"img-fluid object-fit-cover w-100",style:{height:"600px"},alt:"picture",onClick:t[4]||(t[4]=e=>o.openModal(o.secondLastProduct))},null,8,Wt)])])]}),_:1})]),_:1},8,["modules"]),s("div",Yt,[s("div",Zt,[s("img",{src:(b=o.lastProduct)==null?void 0:b.imagesUrl[0],class:"img-fluid object-fit-cover w-100",style:{height:"600px"},alt:"picture",onClick:t[5]||(t[5]=n=>o.openModal(o.lastProduct))},null,8,$t),ts])]),s("div",ss,[s("div",es,[s("img",{src:(T=o.secondLastProduct)==null?void 0:T.imagesUrl[0],class:"img-fluid object-fit-cover w-100",style:{height:"600px"},alt:"picture",onClick:t[6]||(t[6]=n=>o.openModal(o.secondLastProduct))},null,8,os),is])])]),s("div",ns,[s("div",as,[s("div",ls,[v(p,{class:"text-decoration-none",to:"/products?category=生活用品",onclick:"window.scrollTo(0, 0);"},{default:h(()=>[rs,cs]),_:1})]),s("div",ds,[v(p,{class:"text-decoration-none",to:"/products?category=時尚配件",onclick:"window.scrollTo(0, 0);"},{default:h(()=>[ps,us]),_:1})]),s("div",ms,[v(p,{class:"text-decoration-none",to:"/products?category=休閒娛樂",onclick:"window.scrollTo(0, 0);"},{default:h(()=>[_s,gs]),_:1})])])]),v(_)],64)}const Ps=K(rt,[["render",fs]]);export{Ps as default};
