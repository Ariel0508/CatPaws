import{N,P as D,S as q,a as z}from"./pagination-WlznZS4s.js";import{_ as H,k as F,l as K,f as l,g as O,m as X,r as x,o as a,c,a as t,b as u,w as m,t as n,j as P,F as A,d as Q,p as W,q as G,s as J}from"./index-gh1Wuwja.js";import{a as k}from"./axios-G2rPRu76.js";import{u as Y}from"./cartStore-hNeT1rAu.js";import{u as Z}from"./toastMessage-gtw7JEM3.js";import{_ as $}from"./ToastMessages-IWzdNRXF.js";import{M as tt,K as st}from"./mousewheel-m2Jvx6FX.js";const et="/week8/assets/1-UpvAcVqM.png",ot="/week8/assets/6-iqdAB-xn.png",it="/week8/assets/2-6XQBVvbT.png",at="/week8/assets/3-Vlw8e5Xk.png";var ct={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"rubby-api",BASE_URL:"/week8/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const nt={setup(){const V=()=>{s.push("/products")},{VITE_APP_URL:i,VITE_APP_PATH:r}=ct,s=F(),S=K(),E=Y(),{getCart:y}=E,h=l([]),d=l(S.params.productId),_=l({loadingItem:""}),g=Z(),{pushMessage:w}=g,v=e=>{_.value.loadingItem=e;const p={product_id:e,qty:1},R=`${i}/api/${r}/cart`;k.post(R,{data:p}).then(j=>{_.value.loadingItem="",w({style:"success",title:"加入購物車",content:j.data.message}),y()})},f=(e=2)=>{k.get(`${i}/api/${r}/products?page=${e}`).then(p=>{h.value=p.data.products}).catch(p=>{alert(p.response.data.message)})},o=e=>{s.push(`/product/${e.id}`).then(()=>{window.scrollTo(0,0)})},b=l(!0),U=e=>{e===""?b.value=!0:b.value=!1,console.log(e)},T=l(null),B=()=>{k.get(`${i}/api/${r}/products/all`).then(e=>{e.data.success&&e.data.products.length>0&&(T.value=e.data.products[e.data.products.length-1])}).catch(e=>{console.error(e.response.data.message),T.value=null})},C=l(null),I=()=>{k.get(`${i}/api/${r}/products/all`).then(e=>{e.data.success&&e.data.products.length>0&&(C.value=e.data.products[e.data.products.length-2])}).catch(e=>{console.error(e.response.data.message),C.value=null})},L=l(4),M=()=>{window.innerWidth<=767?L.value=2:L.value=4};return O(()=>{f(),B(),I(),M(),window.addEventListener("resize",M)}),X(()=>{window.removeEventListener("resize",M)}),{modules:[N,D,tt,st],goToShop:V,products:h,openModal:o,addToCart:v,handleCategoryClick:U,id:d,status:_,lastProduct:T,secondLastProduct:C,slidesPerView:L}},components:{Swiper:q,SwiperSlide:z,ToastMessages:$}},lt={id:"app"},rt={class:"container-fluid bg-black"},dt={class:"row"},_t=t("div",{class:"col-md-5 col-12 p-0"},[t("img",{src:et,class:"img-fluid",style:{height:"600px"},alt:"banner"})],-1),pt={class:"col-md-7 col-12 text-center align-self-center p-0 mt-5"},ut=t("p",{class:"text-light",style:{"font-size":"1.5em"}}," 讓您的貓咪成為時尚界的新寵兒! ",-1),mt={class:"container mt-8"},ht=t("h3",{class:"text-center text-brown"},[Q(" 精選商品 "),t("div",{class:"text-center text-brown m-0 p-0 fs-1"},"-")],-1),gt={id:"swiper"},wt={class:"row"},vt=["onClick"],ft={key:0,class:"position-absolute top-0 start-0 fw-bold text-white p-2 bg-brown rounded-top"},bt=["src"],xt={class:"card-body"},Pt={class:"card-title"},kt={key:0,class:"text-gray2 fs-5 card-title"},yt={key:1,class:"d-flex align-items-center card-title ms-2"},Tt={class:"text-gray2 fs-5"},Ct={class:"text-brown fs-4 ms-3"},Lt=["onClick"],Mt={key:0,class:"spinner-border spinner-border-sm","aria-hidden":"true"},Vt=t("i",{class:"bi bi-cart-plus"},null,-1),St={class:"container bg-white mt-8"},Et={class:"row mb-5"},At={key:0,class:"col-md-6 p-0 position-relative"},Ut={class:"position-absolute top-50 start-50 translate-middle w-100 h-50 text-center"},Bt=["src"],It={class:"card-title mt-2"},Rt={class:"card-title text-brown"},jt={class:"col-md-6 p-0 position-relative cursor-pointer"},Nt=["src"],Dt=t("p",{class:"position-absolute top-50 start-50 translate-middle text-decoration-underline text-white fs-4"}," 新品上市 ",-1),qt={class:"row flex-row-reverse"},zt={key:0,class:"col-md-6 col-12 p-0 position-relative"},Ht={class:"position-absolute top-50 start-50 translate-middle w-100 h-50 text-center"},Ft=["src"],Kt={class:"card-title mt-2"},Ot={class:"card-title text-brown"},Xt={class:"col-md-6 col-12 p-0 position-relative cursor-pointer"},Qt=["src"],Wt=t("a",{class:"position-absolute top-50 start-50 translate-middle text-decoration-underline text-white fs-4"}," 新品上市 ",-1),Gt={class:"container mt-8"},Jt={class:"row p-5"},Yt={class:"col-md-4 col-12 p-0 mb-3 position-relative"},Zt=t("img",{src:ot,class:"img-fluid w-80 opacity-50",style:{height:"400px"},alt:"productPicture"},null,-1),$t=t("p",{class:"fs-5 position-absolute top-50 start-50 translate-middle text-decoration-underline text-white"}," 生活用品 ",-1),ts={class:"col-md-4 col-12 p-0 mb-3 position-relative"},ss=t("img",{src:it,class:"img-fluid w-80 opacity-50",style:{height:"400px"},alt:"productPicture"},null,-1),es=t("p",{class:"fs-5 position-absolute top-50 start-50 translate-middle text-decoration-underline text-white"}," 時尚配件 ",-1),os={class:"col-md-4 col-12 p-0 mb-3 position-relative"},is=t("img",{src:at,class:"img-fluid w-80 opacity-50",style:{height:"400px"},alt:"productPicture"},null,-1),as=t("p",{class:"fs-5 position-absolute top-50 start-50 translate-middle text-decoration-underline text-white"}," 休閒娛樂 ",-1);function cs(V,i,r,s,S,E){var g,w,v,f;const y=x("swiper-slide"),h=x("swiper"),d=x("RouterLink"),_=x("ToastMessages");return a(),c(A,null,[t("div",lt,[t("div",rt,[t("div",dt,[_t,t("div",pt,[ut,t("button",{type:"button",class:"btn btn-outline-light m-3 px-5 btn-lg rounded-0",onClick:i[0]||(i[0]=(...o)=>s.goToShop&&s.goToShop(...o))}," 立即選購 ")])])]),t("div",mt,[ht,t("div",gt,[u(h,{slidesPerView:s.slidesPerView,grabCursor:!0,spaceBetween:30,pagination:{clickable:!0},freeMode:!0,modules:s.modules,class:"mySwiper",mousewheel:!0,keyboard:!0},{default:m(()=>[(a(!0),c(A,null,W(s.products,o=>(a(),G(y,{key:o.id},{default:m(()=>[t("div",wt,[t("div",{class:"card shadow-sm bg-body rounded-lg border-0 position-relative mb-5 col-12 ms-3 p-0",onClick:b=>s.openModal(o)},[o.price!==o.origin_price?(a(),c("span",ft,"SALE")):P("",!0),t("img",{src:o.imageUrl,class:"card-img-top object-fit-cover w-100",style:{height:"300px"},alt:"productPicture"},null,8,bt),t("div",xt,[t("p",Pt,n(o.title),1),o.price===o.origin_price?(a(),c("div",kt," $"+n(o.origin_price),1)):(a(),c("div",yt,[t("del",Tt,"$"+n(o.origin_price),1),t("div",Ct,"$"+n(o.price),1)])),t("button",{type:"button",class:"btn btn-outline-brown border-0 fs-5 m-2 position-absolute bottom-0 end-0",onClick:J(b=>s.addToCart(o.id,1),["stop"])},[o.id===s.status.loadingItem?(a(),c("span",Mt)):P("",!0),Vt],8,Lt)])],8,vt)])]),_:2},1024))),128))]),_:1},8,["slidesPerView","modules"])])]),t("div",St,[t("div",Et,[s.lastProduct?(a(),c("div",At,[t("div",Ut,[t("img",{src:(g=s.lastProduct)==null?void 0:g.imagesUrl[1],class:"img-fluid object-fit-cover newsimg",alt:"picture",onClick:i[1]||(i[1]=o=>s.openModal(s.lastProduct))},null,8,Bt),t("p",It,n(s.lastProduct.title),1),t("p",Rt,"$"+n(s.lastProduct.price),1)])])):P("",!0),t("div",jt,[t("img",{src:(w=s.lastProduct)==null?void 0:w.imagesUrl[0],class:"img-fluid object-fit-cover w-100",style:{height:"700px"},alt:"picture",onClick:i[2]||(i[2]=o=>s.openModal(s.lastProduct))},null,8,Nt),Dt])]),t("div",qt,[s.secondLastProduct?(a(),c("div",zt,[t("div",Ht,[t("img",{src:(v=s.secondLastProduct)==null?void 0:v.imagesUrl[1],class:"img-fluid object-fit-cover newsimg",alt:"picture",onClick:i[3]||(i[3]=o=>s.openModal(s.secondLastProduct))},null,8,Ft),t("p",Kt,n(s.secondLastProduct.title),1),t("p",Ot,"$"+n(s.secondLastProduct.price),1)])])):P("",!0),t("div",Xt,[t("img",{src:(f=s.secondLastProduct)==null?void 0:f.imagesUrl[0],class:"img-fluid object-fit-cover w-100",style:{height:"700px"},alt:"picture",onClick:i[4]||(i[4]=o=>s.openModal(s.secondLastProduct))},null,8,Qt),Wt])])]),t("div",Gt,[t("div",Jt,[t("div",Yt,[u(d,{class:"text-decoration-none",to:"/products?category=生活用品",onclick:"window.scrollTo(0, 0);"},{default:m(()=>[Zt,$t]),_:1})]),t("div",ts,[u(d,{class:"text-decoration-none",to:"/products?category=時尚配件",onclick:"window.scrollTo(0, 0);"},{default:m(()=>[ss,es]),_:1})]),t("div",os,[u(d,{class:"text-decoration-none",to:"/products?category=休閒娛樂",onclick:"window.scrollTo(0, 0);"},{default:m(()=>[is,as]),_:1})])])])]),u(_)],64)}const ms=H(nt,[["render",cs]]);export{ms as default};
